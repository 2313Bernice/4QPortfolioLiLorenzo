<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="2Q Portfolio">
    <meta name="keywords" content="2Q, Portfolio, Projects, Web Development">
    <meta name="author" content="Bernice Lorenzo">

    <title> HTML Forms </title>
    <link rel="stylesheet" href="">
    <script src="html.js" defer></script>
  </head>
  <body>

    <h1> Show List of Students Who Signed Up </h1>
    

    <label>
        Select Your Club:
        <select name="club" id="club" onchange="viewInfo()">
            <option value="himig"> Himig Agham </option>
            <option value="sightlines"> Sightlines </option>
            <option value="munhwa"> Munhwa </option>
            <option value="pallastro"> Pallastro </option>
            <option value="likha"> Likha </option>
            <option value="astrosoc"> Astrosoc </option>
            <option value="bake"> Bake Club </option>
            <option value="atom"> Atom </option>
        </select>
      </label>
      
      <table id="results"> </table>
<script>

const LIST = "signUp";
let listString = localStorage.getItem(LIST);
let signUpsHave = false;

if (!listString) { 
    infoList = "No Sign Ups Found" 
} 

else{
    signUpsHave = true
}

function viewInfo(){
    
    rowString = "<tr><th>Club</th><th>ID</th><th>Full Name</th><th>Grade</th><th>Email</th><th>Mobile</th><th>Intern/Extern</th></tr>"; 
    const clubChoose = club.value;
    let signCount = 0;
    console.log(infoList)

    for (let key in infoList) {

        if(infoList[key].clubPick == clubChoose){
                rowString += "<tr>";
                rowString += "<td>" + key + "</td>";
                rowString += "<td>" + infoList[key].clubPick + "</td>";
                rowString += "<td>" + infoList[key].studentID + "</td>";
                rowString += "<td>" + infoList[key].fullName + "</td>";
                rowString += "<td>" + infoList[key].grlvl + "</td>";
                rowString += "<td>" + infoList[key].email + "</td>";
                rowString += "<td>" + infoList[key].phone + "</td>"
                rowString += "<td>" + infoList[key].status + "</td></tr>"
                signCount += 1;
        }

        else if(clubChoose == "All"){
                rowString += "<tr>";
                rowString += "<td>" + key + "</td>";
                rowString += "<td>" + infoList[key].clubPick + "</td>";
                rowString += "<td>" + infoList[key].studentID + "</td>";
                rowString += "<td>" + infoList[key].fullName + "</td>";
                rowString += "<td>" + infoList[key].grlvl + "</td>";
                rowString += "<td>" + infoList[key].email + "</td>";
                rowString += "<td>" + infoList[key].phone + "</td>"
                rowString += "<td>" + infoList[key].status + "</td></tr>"
                signCount += 1;
        }
    }

    if (signCount == 0){
        results.innerHTML="No Sign Ups for This Club";
    }

    else{
        results.innerHTML = rowString;
        total.innerHTML= "Total Sign Ups:" + signCount;
    }
}

if(signUpsHave){
    infoList = JSON.parse(listString)
    chosenClub();
}

        
</script>

  </body>